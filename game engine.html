<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MoleScript v1.0.3</title>
  <style>
    body { font-family: sans-serif; display: flex; flex-wrap: wrap; gap: 20px; padding: 20px; }
    textarea { width: 300px; height: 400px; font-family: monospace; }
    #canvas { width: 400px; height: 400px; background: #eee; position: relative; }
    .object { position: absolute; width: 40px; height: 40px; text-align: center; line-height: 40px; color: white; font-weight: bold; }
    #console { width: 300px; height: 400px; overflow-y: auto; background: #111; color: #0f0; padding: 10px; font-family: monospace; }
    button { padding: 10px 20px; font-size: 16px; margin-bottom: 10px; }
    #autocomplete {
      position: absolute;
      background: white;
      border: 1px solid #ccc;
      font-family: monospace;
      font-size: 14px;
      display: none;
      z-index: 10;
      max-height: 150px;
      overflow-y: auto;
    }
    #autocomplete div {
      padding: 4px 8px;
      cursor: pointer;
    }
    #autocomplete div:hover {
      background: #def;
    }
  </style>
</head>
<body>

  <div>
    <button id="startBtn">Start</button>
    <button onclick="openGuide()">Guide</button><br>
    <textarea id="editor">// MoleScript v1.0.3
spawn "fire" as player
set player health to 100
spawn "hazard" as spike
move player right by 3
move spike right by 3

if player.pos = spike.pos:
  player.damage 50
  if player.health <= 0:
    player.animate "death"</textarea>
    <div id="autocomplete"></div>
  </div>

  <div id="canvas"></div>
  <div id="console"></div>

  <script>
    function openGuide() {
      const guideWindow = window.open("", "MoleScriptGuide", "width=800,height=600");
      guideWindow.document.write(`
        <html><head><title>MoleScript v1.0.3 Guide</title>
        <style>
          body { font-family: sans-serif; max-width: 700px; margin: auto; padding: 20px; line-height: 1.6; }
          h1, h2, h3 { color: #c33; }
          code { background: #f4f4f4; padding: 2px 6px; border-radius: 4px; font-family: monospace; }
          pre { background: #f4f4f4; padding: 10px; border-radius: 6px; overflow-x: auto; }
        </style></head><body>
        <h1>üß≠ MoleScript v1.0.3 Guide</h1>
        <h2>üöÄ Overview</h2>
        <ul>
          <li>‚úÖ Health system (<code>set</code>, <code>damage</code>, <code>heal</code>)</li>
          <li>‚úÖ Position logic (<code>pos</code>, <code>posx</code>, <code>posy</code>)</li>
          <li>‚úÖ Conditional checks (<code>if player.health <= 0</code>)</li>
          <li>‚úÖ Method-style calls (<code>player.animate "death"</code>)</li>
          <li>‚úÖ Autocomplete support</li>
        </ul>
        <h2>üß± Core Syntax</h2>
        <pre><code>spawn "fire" as player
set player health to 100
move player right by 3
say player "Hello, {player.health}"</code></pre>
        <h2>üß† Reactive Logic</h2>
        <pre><code>if player.pos = spike.pos:
  player.damage 50
  if player.health <= 0:
    player.animate "death"</code></pre>
        <h2>ü©π Effects</h2>
        <pre><code>player.damage 25
player.heal 10
player.animate "spin"</code></pre>
        <h2>üîÅ Control Flow</h2>
        <pre><code>loop 3 times:
  move player down by 1
  wait 0.5s</code></pre>
        <h2>üéÆ Input</h2>
        <pre><code>input as username
on key "right" then move player right by 1</code></pre>
        <h2>üß™ Sample Script</h2>
        <pre><code>spawn "fire" as player
set player health to 100
spawn "hazard" as spike
move player right by 3
move spike right by 3

if player.pos = spike.pos:
  player.damage 50
  if player.health <= 0:
    player.animate "death"</code></pre>
        </body></html>
      `);
    }
  </script>

</body>
</html>
